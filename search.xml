<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>acme è‡ªåŠ¨ç”³è¯·è¯ä¹¦</title>
      <link href="/2022/02/20/acme-%E8%87%AA%E5%8A%A8%E7%94%B3%E8%AF%B7%E8%AF%81%E4%B9%A6/"/>
      <url>/2022/02/20/acme-%E8%87%AA%E5%8A%A8%E7%94%B3%E8%AF%B7%E8%AF%81%E4%B9%A6/</url>
      
        <content type="html"><![CDATA[<h1 id="ACME-è‡ªåŠ¨ç”³è¯·åŠç®¡ç†è¯ä¹¦"><a href="#ACME-è‡ªåŠ¨ç”³è¯·åŠç®¡ç†è¯ä¹¦" class="headerlink" title="ACME è‡ªåŠ¨ç”³è¯·åŠç®¡ç†è¯ä¹¦"></a>ACME è‡ªåŠ¨ç”³è¯·åŠç®¡ç†è¯ä¹¦</h1><h2 id="å®‰è£…acme-sh"><a href="#å®‰è£…acme-sh" class="headerlink" title="å®‰è£…acme.sh"></a>å®‰è£…acme.sh</h2><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œacme.sh ä¼šå®‰è£…åˆ° ~/.acme.sh ç›®å½•ä¸‹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">curl  https://get.acme.sh | sh</span><br><span class="line">% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                               Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100   671  100   671    0     0    680      0 --:--:-- --:--:-- --:--:--   679</span><br><span class="line">% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                               Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  112k  100  112k    0     0   690k      0 --:--:-- --:--:-- --:--:--  693k</span><br><span class="line">[Fri 30 Dec 01:03:32 GMT 2016] Installing from online archive.</span><br><span class="line">[Fri 30 Dec 01:03:32 GMT 2016] Downloading https://github.com/Neilpang/acme.sh/archive/master.tar.gz</span><br><span class="line">[Fri 30 Dec 01:03:33 GMT 2016] Extracting master.tar.gz</span><br><span class="line">[Fri 30 Dec 01:03:33 GMT 2016] Installing to /home/user/.acme.sh</span><br><span class="line">[Fri 30 Dec 01:03:33 GMT 2016] Installed to /home/user/.acme.sh/acme.sh</span><br><span class="line">[Fri 30 Dec 01:03:33 GMT 2016] Installing <span class="built_in">alias</span> to <span class="string">'/home/user/.profile'</span></span><br><span class="line">[Fri 30 Dec 01:03:33 GMT 2016] OK, Close and reopen your terminal to start using acme.sh</span><br><span class="line">[Fri 30 Dec 01:03:33 GMT 2016] Installing cron job</span><br><span class="line">no crontab <span class="keyword">for</span> user</span><br><span class="line">no crontab <span class="keyword">for</span> user</span><br><span class="line">[Fri 30 Dec 01:03:33 GMT 2016] Good, bash is found, so change the shebang to use bash as preferred.</span><br><span class="line">[Fri 30 Dec 01:03:33 GMT 2016] OK</span><br><span class="line">[Fri 30 Dec 01:03:33 GMT 2016] Install success!</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸåæ‰§è¡Œ source ~/.bashrc ä»¥ç¡®ä¿è„šæœ¬æ‰€è®¾ç½®çš„å‘½ä»¤åˆ«åç”Ÿæ•ˆã€‚</p><p>å¦‚æœå®‰è£…æŠ¥é”™ï¼Œé‚£ä¹ˆå¯èƒ½æ˜¯å› ä¸ºç³»ç»Ÿç¼ºå°‘ acme.sh æ‰€éœ€è¦çš„ä¾èµ–é¡¹ï¼Œacme.sh çš„ä¾èµ–é¡¹ä¸»è¦æ˜¯ netcat(nc)ï¼Œæˆ‘ä»¬é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…è¿™äº›ä¾èµ–é¡¹ï¼Œç„¶åé‡æ–°å®‰è£…ä¸€é acme.sh:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt -y install netcat socat</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="ä½¿ç”¨-acme-sh-ç”Ÿæˆè¯ä¹¦åŠæ›´æ–°"><a href="#ä½¿ç”¨-acme-sh-ç”Ÿæˆè¯ä¹¦åŠæ›´æ–°" class="headerlink" title="ä½¿ç”¨ acme.sh ç”Ÿæˆè¯ä¹¦åŠæ›´æ–°"></a>ä½¿ç”¨ acme.sh ç”Ÿæˆè¯ä¹¦åŠæ›´æ–°</h2><h3 id="ç”Ÿæˆè¯ä¹¦"><a href="#ç”Ÿæˆè¯ä¹¦" class="headerlink" title="ç”Ÿæˆè¯ä¹¦"></a>ç”Ÿæˆè¯ä¹¦</h3><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆè¯ä¹¦ï¼š</p><p>ä»¥ä¸‹çš„å‘½ä»¤ä¼šä¸´æ—¶ç›‘å¬ 80 ç«¯å£ï¼Œè¯·ç¡®ä¿æ‰§è¡Œè¯¥å‘½ä»¤å‰ 80 ç«¯å£æ²¡æœ‰ä½¿ç”¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.acme.sh/acme.sh --issue -d mydomain.me --standalone -k ec-256</span><br></pre></td></tr></table></figure><p><code>-k</code> è¡¨ç¤ºå¯†é’¥é•¿åº¦ï¼Œåé¢çš„å€¼å¯ä»¥æ˜¯ ec-256 ã€ec-384ã€2048ã€3072ã€4096ã€8192ï¼Œå¸¦æœ‰ ec è¡¨ç¤ºç”Ÿæˆçš„æ˜¯ ECC è¯ä¹¦ï¼Œæ²¡æœ‰åˆ™æ˜¯ RSA è¯ä¹¦ã€‚åœ¨å®‰å…¨æ€§ä¸Š 256 ä½çš„ ECC è¯ä¹¦ç­‰åŒäº 3072 ä½çš„ RSA è¯ä¹¦ã€‚</p><h3 id="è¯ä¹¦æ›´æ–°"><a href="#è¯ä¹¦æ›´æ–°" class="headerlink" title="è¯ä¹¦æ›´æ–°"></a>è¯ä¹¦æ›´æ–°</h3><p>è¯ä¹¦æ›´æ–°<br>ç”±äº Letâ€™s Encrypt çš„è¯ä¹¦æœ‰æ•ˆæœŸåªæœ‰ 3 ä¸ªæœˆï¼Œå› æ­¤éœ€è¦ 90 å¤©è‡³å°‘è¦æ›´æ–°ä¸€æ¬¡è¯ä¹¦ï¼Œacme.sh è„šæœ¬ä¼šæ¯ 60 å¤©è‡ªåŠ¨æ›´æ–°è¯ä¹¦ã€‚ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ›´æ–°ã€‚</p><p>æ‰‹åŠ¨æ›´æ–° ECC è¯ä¹¦ï¼Œæ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.acme.sh/acme.sh --renew -d mydomain.com --force --ecc</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯ RSA è¯ä¹¦åˆ™æ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.acme.sh/acme.sh --renew -d mydomain.com --force</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…è¯ä¹¦"><a href="#å®‰è£…è¯ä¹¦" class="headerlink" title="å®‰è£…è¯ä¹¦"></a>å®‰è£…è¯ä¹¦</h2><p>ECC è¯ä¹¦</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.acme.sh/acme.sh --installcert -d mydomain.me --fullchainpath /etc/v2ray/v2ray.crt --keypath /etc/v2ray/v2ray.key --ecc</span><br></pre></td></tr></table></figure><p>RSA è¯ä¹¦<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.acme.sh/acme.sh --installcert -d mydomain.me --fullchainpath /etc/v2ray/v2ray.crt --keypath /etc/v2ray/v2ray.key</span><br></pre></td></tr></table></figure><br>æ³¨æ„ï¼šæ— è®ºä»€ä¹ˆæƒ…å†µï¼Œå¯†é’¥(å³ä¸Šé¢çš„v2ray.key)éƒ½ä¸èƒ½æ³„æ¼ï¼Œå¦‚æœä½ ä¸å¹¸æ³„æ¼äº†å¯†é’¥ï¼Œå¯ä»¥ä½¿ç”¨ acme.sh å°†åŸè¯ä¹¦åŠé”€ï¼Œå†ç”Ÿæˆæ–°çš„è¯ä¹¦ï¼ŒåŠé”€æ–¹æ³•è¯·è‡ªè¡Œå‚è€ƒ acme.sh çš„æ‰‹å†Œ</p><p>å¦‚æœæ›´æ–°å®Œè¯ä¹¦åéœ€è¦è‡ªåŠ¨é‡å¯æœåŠ¡ï¼Œåˆ™éœ€æ·»åŠ <code>--reloadcmd  &quot;nginx -s reload&quot;</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.acme.sh/acme.sh --installcert -d mydomain.me --fullchainpath /etc/v2ray/v2ray.crt --keypath /etc/v2ray/v2ray.key --ecc --reloadcmd <span class="string">"service xxx restart"</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> tls </tag>
            
            <tag> ecc </tag>
            
            <tag> auto renew </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>eth rpc æ­å»º</title>
      <link href="/2020/07/28/eth-rpc-%E6%90%AD%E5%BB%BA/"/>
      <url>/2020/07/28/eth-rpc-%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="åŒæ­¥-rpc"><a href="#åŒæ­¥-rpc" class="headerlink" title="åŒæ­¥ + rpc"></a>åŒæ­¥ + rpc</h1><ul><li><p>http</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geth --datadir /mnt/eth/data --rpc --rpcaddr 0.0.0.0 --rpcport 28545 --rpcapi personal???db,eth,net,web3</span><br></pre></td></tr></table></figure></li><li><p>ws</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geth --datadir ./geth-data --dev --ws --ws.port 13334 --ws.api eth,net,web3,miner,personal --verbosity 3</span><br></pre></td></tr></table></figure></li></ul><p><code>--dev</code> å¼€å‘æ¨¡å¼<br><code>--allow-insecure-unlock</code> å…è®¸æœ¬åœ°è§£é”ï¼Œçº¿ä¸Šéœ€å…³é—­<br><code>--verbosity 3</code> æ—¥å¿—ç­‰çº§ é»˜è®¤3</p><h1 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geth attach ./geth-data/geth.ipc</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> eth.accounts // æŸ¥çœ‹è´¦æˆ·</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> eth.accounts[0] // æŸ¥çœ‹ç‰¹å®šé’±åŒ…åœ°å€</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> eth.getBalance(eth.accounts[0]) // æŸ¥è¯¢eth ä½™é¢</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> eth.sendTransaction(&#123;from: eth.accounts[0] , to: eth.accounts[1], value: web3.toWei(10, <span class="string">"ether"</span>)&#125;) // è½¬è´¦</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> eth.blockNumber // æŸ¥è¯¢åŒºå—é«˜åº¦</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> personal.newAccount(<span class="string">"password"</span>) //åˆ›å»ºç”¨æˆ·</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> miner.start() //å¼€å§‹å½“å‰ç”¨æˆ·æŒ–çŸ¿</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> miner.stop() //åœæ­¢å½“å‰ç”¨æˆ·æŒ–çŸ¿</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> eth.getTransaction(<span class="string">"txid"</span>) // æ ¹æ®txIDæŸ¥è¯¢äº¤æ˜“</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> eth.getTransactionReceipt(<span class="string">"txid"</span>) //æ ¹æ®txID æŸ¥è¯¢äº¤æ˜“ç»“æœ</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> personal.unlockAccount(eth.accounts[1]) // è§£é”ç”¨æˆ·</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>gitea + drone ç¾¤æ™–æ­å»º</title>
      <link href="/2020/06/01/gitea-drone-%E7%BE%A4%E6%99%96%E6%90%AD%E5%BB%BA/"/>
      <url>/2020/06/01/gitea-drone-%E7%BE%A4%E6%99%96%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<p>è¿‘æ—¥å°†DS214play æ·˜æ±°æ¢æˆ DS216+iiï¼Œç»ˆäºå¯ä»¥dockeræ„‰å¿«çš„ç©è€</p><p>è¿™é‡Œé€‰ç”¨æ•°æ®åº“ç”¨PostgreSql,Drone çš„åŸè¯æ˜¯<a href="https://docs.drone.io/server/storage/database/" target="_blank" rel="noopener">æ¨èä½¿ç”¨</a>PostgreSqlã€‚</p><blockquote><p>We strongly recommend using postgres instead of mysql. The system has been optimized for features not found in mysql.</p></blockquote><p>æ‰€ä»¥ï¼Œè¿™é‡Œæˆ‘ä»¬giteaåŒæ ·ä¹Ÿä½¿ç”¨ Postgres ä¸€ä¸ªæ•°æ®åº“æå®š</p><a id="more"></a><h1 id="Postgres"><a href="#Postgres" class="headerlink" title="Postgres"></a>Postgres</h1><p>è¿™é‡Œæˆ‘ä»¬æ³¨æ„å°†Postgres çš„æ•°æ®åº“åšä¸€ä¸ªæŒä¹…åŒ–å­˜å‚¨ï¼Œé“¾æ¥åˆ°æœ¬æœº<br>/XX/XX    /var/lib/postgresql/data</p><p>ä»¥åŠè®¾ç½®ç¯å¢ƒå˜é‡POSTGRES_PASSWORD å’Œç«¯å£ç»‘å®š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name postgres -e POSTGRES_PASSWORD=&#123;yourpassword&#125; -v &#123;/XX/XX(æœ¬åœ°è·¯å¾„)&#125;:/var/lib/postgresql/data -d -p &#123;yourport&#125;:5432 postgres</span><br></pre></td></tr></table></figure></p><p>åˆ›å»ºå¥½åã€‚åˆ›å»ºgiteaå’Œdroneä½¿ç”¨çš„æ•°æ®åº“ï¼ˆå¦‚æœä¸é—²éº»çƒ¦ï¼Œå¯ä»¥å†ä¸ºè¿™ä¸¤ä¸ªæ•°æ®åº“åˆ›å»ºå¯¹åº”çš„ç”¨æˆ·ï¼‰ã€‚</p><h1 id="gitea"><a href="#gitea" class="headerlink" title="gitea"></a>gitea</h1><p>è¿™é‡Œè¦æ³¨æ„çš„ä¸œè¥¿ä¸å¤šã€‚dockeré…ç½®çš„æ—¶å€™æ³¨æ„è‡ªå·±æ‰€å¯¹åº”çš„ç«¯å£å·,å¹¶ä¸”å°†å¯¹åº”æ•°æ®ä»“åº“åšä¸€ä¸ªæŒä¹…åŒ–å­˜å‚¨<br>/XX/XX    /data</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name=gitea -p &#123;ssh-port&#125;:22 -p &#123;http-port&#125;:3000 -v &#123;/XX/XX&#125;:/data gitea/gitea</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå®Œæˆåï¼Œå±äºå¯¹åº”çš„http å³å¯å¯åŠ¨<br>è¿›å…¥è®¾ç½®é¡µé¢åã€‚æ•°æ®åº“é€‰æ‹©postgres,è¿™é‡Œæ³¨æ„æ•°æ®åº“çš„åœ°å€,å¯ä»¥å¡«dockerç½‘å…³ï¼Œ172.17.0.1</p><p>å¯¹åº”ç„¶åå¡«å†™è‡ªå·±å¯¹åº”çš„åŸŸåï¼Œç«¯å£ã€‚ç«¯å£éƒ¨åˆ†é™¤äº†å†…éƒ¨æœåŠ¡çš„3000ä¸ç”¨æ”¹ï¼Œå…¶ä»–çš„ç«¯å£å‡éœ€æ”¹æˆdockerå¯¹åº”æ˜ å°„çš„ç«¯å£å·</p><p>é™„ä¸Šapp.inié…ç½®æ–‡ä»¶<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">APP_NAME</span> = Gitea: Git with a cup of tea</span><br><span class="line"><span class="attr">RUN_MODE</span> = prod</span><br><span class="line"><span class="attr">RUN_USER</span> = git</span><br><span class="line"></span><br><span class="line"><span class="section">[repository]</span></span><br><span class="line"><span class="attr">ROOT</span> = /data/git/repositories</span><br><span class="line"></span><br><span class="line"><span class="section">[repository.local]</span></span><br><span class="line"><span class="attr">LOCAL_COPY_PATH</span> = /data/gitea/tmp/local-repo</span><br><span class="line"></span><br><span class="line"><span class="section">[repository.upload]</span></span><br><span class="line"><span class="attr">TEMP_PATH</span> = /data/gitea/uploads</span><br><span class="line"></span><br><span class="line"><span class="section">[server]</span></span><br><span class="line"><span class="attr">APP_DATA_PATH</span>    = /data/gitea</span><br><span class="line"><span class="attr">DOMAIN</span>           = &#123;åŸŸå&#125;</span><br><span class="line"><span class="attr">SSH_DOMAIN</span>       = &#123;åŸŸå&#125;</span><br><span class="line"><span class="attr">HTTP_PORT</span>        = <span class="number">3000</span></span><br><span class="line"><span class="attr">ROOT_URL</span>         = http://&#123;åŸŸå&#125;:&#123;http-port&#125;/</span><br><span class="line"><span class="attr">DISABLE_SSH</span>      = <span class="literal">false</span></span><br><span class="line"><span class="attr">SSH_PORT</span>         = &#123;ssh-port&#125;</span><br><span class="line"><span class="attr">SSH_LISTEN_PORT</span>  = <span class="number">22</span></span><br><span class="line"><span class="attr">LFS_START_SERVER</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">LFS_CONTENT_PATH</span> = /data/git/lfs</span><br><span class="line"><span class="attr">LFS_JWT_SECRET</span>   = &#123;XXXXX&#125;</span><br><span class="line"><span class="attr">OFFLINE_MODE</span>     = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="section">[database]</span></span><br><span class="line"><span class="attr">PATH</span>     = /data/gitea/gitea.db</span><br><span class="line"><span class="attr">DB_TYPE</span>  = postgres</span><br><span class="line"><span class="attr">HOST</span>     = &#123;HOST&#125;:&#123;PORT&#125;</span><br><span class="line"><span class="attr">NAME</span>     = &#123;DATABASE_NAME&#125;</span><br><span class="line"><span class="attr">USER</span>     = &#123;user&#125;</span><br><span class="line"><span class="attr">PASSWD</span>   = &#123;password&#125;</span><br><span class="line"><span class="attr">SCHEMA</span>   = </span><br><span class="line"><span class="attr">SSL_MODE</span> = disable</span><br><span class="line"><span class="attr">CHARSET</span>  = utf8</span><br><span class="line"></span><br><span class="line"><span class="section">[indexer]</span></span><br><span class="line"><span class="attr">ISSUE_INDEXER_PATH</span> = /data/gitea/indexers/issues.bleve</span><br><span class="line"></span><br><span class="line"><span class="section">[session]</span></span><br><span class="line"><span class="attr">PROVIDER_CONFIG</span> = /data/gitea/sessions</span><br><span class="line"><span class="attr">PROVIDER</span>        = file</span><br><span class="line"></span><br><span class="line"><span class="section">[picture]</span></span><br><span class="line"><span class="attr">AVATAR_UPLOAD_PATH</span>            = /data/gitea/avatars</span><br><span class="line"><span class="attr">REPOSITORY_AVATAR_UPLOAD_PATH</span> = /data/gitea/repo-avatars</span><br><span class="line"><span class="attr">DISABLE_GRAVATAR</span>              = <span class="literal">false</span></span><br><span class="line"><span class="attr">ENABLE_FEDERATED_AVATAR</span>       = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="section">[attachment]</span></span><br><span class="line"><span class="attr">ENABLED</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">PATH</span> = /data/gitea/attachments</span><br><span class="line"><span class="attr">ALLOWED_TYPES</span> = */*</span><br><span class="line"><span class="attr">MAX_SIZE</span> = <span class="number">100</span></span><br><span class="line"><span class="attr">MAX_FILES</span> = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="section">[log]</span></span><br><span class="line"><span class="attr">ROOT_PATH</span> = /data/gitea/log</span><br><span class="line"><span class="attr">MODE</span>      = file</span><br><span class="line"><span class="attr">LEVEL</span>     = info</span><br><span class="line"></span><br><span class="line"><span class="section">[security]</span></span><br><span class="line"><span class="attr">INSTALL_LOCK</span>   = <span class="literal">true</span></span><br><span class="line"><span class="attr">SECRET_KEY</span>     = &#123;XXXX&#125;</span><br><span class="line"><span class="attr">INTERNAL_TOKEN</span> = &#123;XXXX&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">[service]</span></span><br><span class="line"><span class="attr">DISABLE_REGISTRATION</span>              = <span class="literal">true</span></span><br><span class="line"><span class="attr">REQUIRE_SIGNIN_VIEW</span>               = <span class="literal">true</span></span><br><span class="line"><span class="attr">REGISTER_EMAIL_CONFIRM</span>            = <span class="literal">false</span></span><br><span class="line"><span class="attr">ENABLE_NOTIFY_MAIL</span>                = <span class="literal">true</span></span><br><span class="line"><span class="attr">ALLOW_ONLY_EXTERNAL_REGISTRATION</span>  = <span class="literal">false</span></span><br><span class="line"><span class="attr">ENABLE_CAPTCHA</span>                    = <span class="literal">false</span></span><br><span class="line"><span class="attr">DEFAULT_KEEP_EMAIL_PRIVATE</span>        = <span class="literal">false</span></span><br><span class="line"><span class="attr">DEFAULT_ALLOW_CREATE_ORGANIZATION</span> = <span class="literal">false</span></span><br><span class="line"><span class="attr">DEFAULT_ENABLE_TIMETRACKING</span>       = <span class="literal">true</span></span><br><span class="line"><span class="attr">NO_REPLY_ADDRESS</span>                  = noreply.localhost</span><br><span class="line"></span><br><span class="line"><span class="section">[oauth2]</span></span><br><span class="line"><span class="attr">JWT_SECRET</span> = &#123;XXXXX&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">[mailer]</span></span><br><span class="line"><span class="attr">ENABLED</span>        = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="section">[openid]</span></span><br><span class="line"><span class="attr">ENABLE_OPENID_SIGNIN</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">ENABLE_OPENID_SIGNUP</span> = <span class="literal">false</span></span><br></pre></td></tr></table></figure></p><h1 id="drone"><a href="#drone" class="headerlink" title="drone"></a>drone</h1><h2 id="drone-server"><a href="#drone-server" class="headerlink" title="drone server"></a>drone server</h2><p>é¦–å…ˆåœ¨gitea -&gt; å¤´åƒ -&gt; è®¾ç½® -&gt; åº”ç”¨ -&gt; OAuth2 ä¸­æ·»åŠ åº”ç”¨<br>è®¾ç½®å›è°ƒ http://{HOST}:{PORT}/login<br>æ‹¿åˆ°client_id, secret_key</p><p>é…ç½®<br>DRONE_GITEA_CLIENT_ID<br>DRONE_GITEA_CLIENT_SECRET<br>DRONE_GITEA_SERVER {gitea ç™»é™†è·¯å¾„}<br>DRONE_RPC_SECRET {RPC_SECRET}<br>DRONE_SERVER_PROTO http<br>DRONE_SERVER_PORT :80<br>DRONE_SERVER_HOST {server_host}:{server_port}<br>DRONE_DATABASE_DRIVER postgres<br>DRONE_DATABASE_DATASOURCE postgres://{user_name}:{password}@{addr}:{port}/{database}?sslmode=disable</p><h2 id="drone-runner"><a href="#drone-runner" class="headerlink" title="drone runner"></a>drone runner</h2><p>runner å¯ä»¥åˆ†å¼€éƒ¨ç½²åˆ°å…¶ä»–æœºå™¨ä¸Š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  -e DRONE_RPC_PROTO=http \</span><br><span class="line">  -e DRONE_RPC_HOST=&#123;server_host&#125;:&#123;server_port&#125; \</span><br><span class="line">  -e DRONE_RPC_SECRET=&#123;RPC_SECRET&#125; \</span><br><span class="line">  -e DRONE_RUNNER_CAPACITY=2 \</span><br><span class="line">  -e DRONE_RUNNER_NAME=<span class="variable">$&#123;HOSTNAME&#125;</span> \</span><br><span class="line">  -v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">  --restart always \</span><br><span class="line">  --name runner \</span><br><span class="line">  drone/agent</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> drone </tag>
            
            <tag> ç¾¤æ™– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mysql æ“ä½œ</title>
      <link href="/2019/09/17/mysql-%E6%93%8D%E4%BD%9C/"/>
      <url>/2019/09/17/mysql-%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="dump-æ•°æ®åº“"><a href="#dump-æ•°æ®åº“" class="headerlink" title="dump æ•°æ®åº“"></a>dump æ•°æ®åº“</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -u[user] -p[password] [db] [filePath]</span><br></pre></td></tr></table></figure><h1 id="å¤åˆ¶æ•°æ®åº“"><a href="#å¤åˆ¶æ•°æ®åº“" class="headerlink" title="å¤åˆ¶æ•°æ®åº“"></a>å¤åˆ¶æ•°æ®åº“</h1><p>æœ¬åœ°å¤åˆ¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -u[user] -p[password] [db] | mysql -h127.0.0.1 -u[user] -p[password] [db]</span><br></pre></td></tr></table></figure><p>æœ¬åœ°ä¸­è½¬ å¤åˆ¶åˆ°è¿œç¨‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh [root]@[ip] <span class="string">"mysqldump -u[user] -p[password] [db]"</span> | ssh -C [root]@[ip] <span class="string">"mysql -h127.0.0.1 -u[user] -p[password] [db]"</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> mysql </tag>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker æ­å»ºæµ‹è¯•Mysql Mongo</title>
      <link href="/2019/06/25/docker-%E6%90%AD%E5%BB%BA%E6%B5%8B%E8%AF%95Mysql-Mongo/"/>
      <url>/2019/06/25/docker-%E6%90%AD%E5%BB%BA%E6%B5%8B%E8%AF%95Mysql-Mongo/</url>
      
        <content type="html"><![CDATA[<h1 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h1><p>å€¼å¾—æ³¨æ„çš„æ˜¯,å¤–éƒ¨ä¸»æœºçš„IPåœ°å€æ˜¯172.17.0.1, é™å®šIPåœ°å€ç™»é™†çš„æ—¶å€™è¦æ”¾è¡Œè¿™ä¸ªIP</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --restart=always --name mariadb  -e MYSQL_ROOT_PASSWORD=123456 -v ~/xxx/mariadb:/var/lib/mysql -p 127.0.0.1:3306:3306 mariadb</span><br></pre></td></tr></table></figure><a id="more"></a><h1 id="mongo"><a href="#mongo" class="headerlink" title="mongo"></a>mongo</h1><p>é¦–å…ˆï¼Œé…ç½®å¥½æ–‡ä»¶ Yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mongod.conf</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for documentation of all options, see:</span></span><br><span class="line"><span class="comment">#   http://docs.mongodb.org/manual/reference/configuration-options/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Where and how to store data.</span></span><br><span class="line"><span class="attr">storage:</span></span><br><span class="line">  <span class="attr">dbPath:</span> <span class="string">/data/db</span></span><br><span class="line">  <span class="attr">journal:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment">#  engine:</span></span><br><span class="line"><span class="comment">#  mmapv1:</span></span><br><span class="line"><span class="comment">#  wiredTiger:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># where to write logging data.</span></span><br><span class="line"><span class="attr">systemLog:</span></span><br><span class="line">  <span class="attr">destination:</span> <span class="string">file</span></span><br><span class="line">  <span class="attr">logAppend:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">/var/log/mongodb/mongod.log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># network interfaces</span></span><br><span class="line"><span class="attr">net:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">27017</span></span><br><span class="line">  <span class="attr">bindIp:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># how the process runs</span></span><br><span class="line"><span class="attr">processManagement:</span></span><br><span class="line">  <span class="attr">timeZoneInfo:</span> <span class="string">/usr/share/zoneinfo</span></span><br><span class="line"></span><br><span class="line"><span class="attr">security:</span></span><br><span class="line">  <span class="attr">authorization:</span> <span class="string">enabled</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#operationProfiling:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#replication:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#sharding:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Enterprise-Only Options:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#auditLog:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#snmp:</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run --restart=always --name mongo -v ~/xxx/mongodb/config:/etc/mongo -v ~/xxx/mongodb/db:/data/db -p 27017:27017 -d mongo -f /etc/mongo/mongod.conf</span><br><span class="line"></span><br><span class="line">docker <span class="built_in">exec</span> -it mongo mongo</span><br></pre></td></tr></table></figure><p>è®¾ç½®admin æƒé™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">use admin</span><br><span class="line">db.createUser(&#123;</span><br><span class="line">    user: <span class="string">'admin'</span>,</span><br><span class="line">    <span class="built_in">pwd</span>: <span class="string">'admin'</span>,</span><br><span class="line">    roles: [&#123;role: <span class="string">'userAdminAnyDatabase'</span>, db: <span class="string">'admin'</span>&#125;]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ–°å»ºæ•°æ®åº“å’Œç”¨æˆ·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">use newDb</span><br><span class="line">db.createUser(&#123;</span><br><span class="line">    user: <span class="string">'user'</span>,</span><br><span class="line">    <span class="built_in">pwd</span>: <span class="string">'123456'</span>,</span><br><span class="line">    roles: [&#123;role: <span class="string">'dbOwner'</span>, db: <span class="string">'userDb'</span>&#125;]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> mysql </tag>
            
            <tag> mongo </tag>
            
            <tag> mariadb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ssh å‡çº§ed25519</title>
      <link href="/2019/05/18/ssh-%E5%8D%87%E7%BA%A7ed25519/"/>
      <url>/2019/05/18/ssh-%E5%8D%87%E7%BA%A7ed25519/</url>
      
        <content type="html"><![CDATA[<h1 id="ssh-å‡çº§ed25519"><a href="#ssh-å‡çº§ed25519" class="headerlink" title="ssh å‡çº§ed25519"></a>ssh å‡çº§ed25519</h1><h2 id="ECC-ä»‹ç»"><a href="#ECC-ä»‹ç»" class="headerlink" title="ECC ä»‹ç»"></a>ECC ä»‹ç»</h2><p><a href="https://medium.com/risan/upgrade-your-ssh-key-to-ed25519-c6e8d60d3c54" target="_blank" rel="noopener">å‚è€ƒ</a></p><blockquote><p>åœ¨ed25519 68ä½åŠ å¯†çš„æƒ…å†µä¸‹ï¼Œå®‰å…¨æ€§å¯ä»¥è·ŸRSA 544~3072çš„é•¿åº¦ç›¸å½“</p></blockquote><p><a href="https://toutyrater.github.io/advanced/tls.html" target="_blank" rel="noopener">å‚è€ƒ</a></p><blockquote><p>è¯ä¹¦æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ ECC è¯ä¹¦ï¼ˆå†…ç½®å…¬é’¥æ˜¯ ECDSA å…¬é’¥ï¼‰ï¼Œä¸€ç§æ˜¯ RSA è¯ä¹¦ï¼ˆå†…ç½® RSA å…¬é’¥ï¼‰ã€‚ç®€å•æ¥è¯´ï¼ŒåŒç­‰é•¿åº¦ ECC æ¯” RSA æ›´å®‰å…¨,ä¹Ÿå°±æ˜¯è¯´åœ¨å…·æœ‰åŒæ ·å®‰å…¨æ€§çš„æƒ…å†µä¸‹ï¼ŒECC çš„å¯†é’¥é•¿åº¦æ¯” RSA çŸ­å¾—å¤šï¼ˆåŠ å¯†è§£å¯†ä¼šæ›´å¿«ï¼‰ã€‚ä½†é—®é¢˜æ˜¯ ECC çš„å…¼å®¹æ€§ä¼šå·®ä¸€äº›ï¼ŒAndroid 4.x ä»¥ä¸‹å’Œ Windows XP ä¸æ”¯æŒã€‚åªè¦æ‚¨çš„è®¾å¤‡ä¸æ˜¯éå¸¸è€çš„è€å¤è‘£ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨ ECC è¯ä¹¦ã€‚</p></blockquote><p><strong> å½“ç„¶é‡ç‚¹æ˜¯ed25519 æ›´å¿« </strong> </p><a id="more"></a><h2 id="å‡çº§æ“ä½œ"><a href="#å‡çº§æ“ä½œ" class="headerlink" title="å‡çº§æ“ä½œ"></a>å‡çº§æ“ä½œ</h2><ol><li><p>é¦–å…ˆç”Ÿæˆæ–°çš„å¯†é’¥å…¬é’¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh-keygen -o -a 128 -t ed25519 -f ~/.ssh/id_ed25519 -C <span class="string">"yourmail@example.com"</span></span><br></pre></td></tr></table></figure></li><li><p>ç„¶åä¿®æ”¹~/.ssh/config</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">    Hostname github.com</span><br><span class="line">    Port 22</span><br><span class="line">    IdentityFile ~/.ssh/id_ed25519</span><br><span class="line">    IdentityFile ~/.ssh/***  <span class="comment"># æ­¤å¤„ä¿®æ”¹ä¸ºè€å¯†é’¥ï¼Œåšå…¼å®¹</span></span><br></pre></td></tr></table></figure></li><li><p>ä¸Šä¼ æ–°çš„å…¬é’¥è‡³æœåŠ¡å™¨æˆ–gitæœåŠ¡å•†</p></li><li><p>æ³¨æ„<br>ç›®å‰æµ‹è¯•githubã€codingéƒ½æ”¯æŒ,ed25519 æ˜¯openssh 6.5 æ‰æ”¯æŒçš„ã€‚å¦‚æœç‰ˆæœ¬ä¸å¤Ÿï¼Œè¯·å‡çº§ä¸‹openSSHç‰ˆæœ¬ã€‚<br><strong> openSSH å‡çº§è¯·ç¡®ä¿è‡ªå·±å‡çº§åèƒ½è¿›å…¥ç³»ç»Ÿ ğŸ¶ </strong></p></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> ssh </tag>
            
            <tag> rsa </tag>
            
            <tag> ed25519 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux bbr å¼€å¯</title>
      <link href="/2019/03/27/linux-bbr-%E5%BC%80%E5%90%AF/"/>
      <url>/2019/03/27/linux-bbr-%E5%BC%80%E5%90%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="æ‰‹åŠ¨å¼€å¯-BBR"><a href="#æ‰‹åŠ¨å¼€å¯-BBR" class="headerlink" title="æ‰‹åŠ¨å¼€å¯ BBR"></a>æ‰‹åŠ¨å¼€å¯ BBR</h1><p>æ³¨æ„ä»¥ä¸‹å‘½ä»¤éœ€è¦ root æƒé™ï¼Œé root ç”¨æˆ·å…ˆæ‰§è¡Œ sudo su - åˆ‡æ¢åˆ° root è´¦æˆ·</p><ul><li>è¿è¡Œ uname -r çœ‹çœ‹æ˜¯ä¸æ˜¯å†…æ ¸ &gt;= 4.9ï¼Œä¸æ˜¯çš„è¯è¯·å…ˆå‡çº§å†…æ ¸</li><li>æ‰§è¡Œ lsmod | grep bbrï¼ŒæŸ¥çœ‹ BBR æ¨¡å—æ˜¯å¦å¯ç”¨ï¼Œå¦‚æœç»“æœä¸­æ²¡æœ‰ tcp_bbr çš„è¯å°±å…ˆæ‰§è¡Œ<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">modprobe tcp_bbr</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"tcp_bbr"</span> &gt;&gt; /etc/modules-load.d/modules.conf</span><br></pre></td></tr></table></figure></li><li>æ‰§è¡Œä¸‹å‘½ä»¤å¼€å¯è®¾ç½® TCP ä½¿ç”¨ BBR å‘åŒ…<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"net.core.default_qdisc=fq"</span> &gt;&gt; /etc/sysctl.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"net.ipv4.tcp_congestion_control=bbr"</span> &gt;&gt; /etc/sysctl.conf</span><br></pre></td></tr></table></figure></li><li>ä¿å­˜ç”Ÿæ•ˆ sysctl -p</li><li>éªŒè¯ BBR æ˜¯å¦å·²ç»å¯ç”¨<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sysctl net.ipv4.tcp_available_congestion_control</span><br><span class="line">sysctl net.ipv4.tcp_congestion_control</span><br></pre></td></tr></table></figure>å¦‚æœç»“æœéƒ½æœ‰bbr, åˆ™è¯æ˜ä½ çš„å†…æ ¸å·²å¼€å¯bbr</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> bbr </tag>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linuxå†…æ ¸å‡çº§</title>
      <link href="/2019/03/23/linux%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7/"/>
      <url>/2019/03/23/linux%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7/</url>
      
        <content type="html"><![CDATA[<h2 id="centos"><a href="#centos" class="headerlink" title="centos"></a>centos</h2><p><a href="https://www.jianshu.com/p/fdf6bb6c5b9c" target="_blank" rel="noopener">centos å†…æ ¸å‡çº§è½¬è½½</a></p><h3 id="æ£€æŸ¥å½“å‰-CentOS-ç³»ç»Ÿç‰ˆæœ¬"><a href="#æ£€æŸ¥å½“å‰-CentOS-ç³»ç»Ÿç‰ˆæœ¬" class="headerlink" title="æ£€æŸ¥å½“å‰ CentOS ç³»ç»Ÿç‰ˆæœ¬"></a>æ£€æŸ¥å½“å‰ CentOS ç³»ç»Ÿç‰ˆæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat /etc/redhat-release</span></span><br><span class="line"></span><br><span class="line">&gt; CentOS Linux release 7.1.1503 (Core)</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="æ£€æŸ¥å½“å‰-CentOS-ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬"><a href="#æ£€æŸ¥å½“å‰-CentOS-ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬" class="headerlink" title="æ£€æŸ¥å½“å‰ CentOS ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬"></a>æ£€æŸ¥å½“å‰ CentOS ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># uname -sr</span></span><br><span class="line"></span><br><span class="line">&gt; Linux 3.10.0-327.10.1.e17.x86_64</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºå½“å‰ç³»ç»Ÿä¸º CentOS 7.1,ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬ä¸º 3.10.</p><h3 id="è¿è¡Œ-yum-å‘½ä»¤å‡çº§"><a href="#è¿è¡Œ-yum-å‘½ä»¤å‡çº§" class="headerlink" title="è¿è¡Œ yum å‘½ä»¤å‡çº§"></a>è¿è¡Œ yum å‘½ä»¤å‡çº§</h3><p>CentOS ä¸­ update å‘½ä»¤å¯ä»¥ä¸€æ¬¡æ€§æ›´æ–°æ‰€æœ‰è½¯ä»¶åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum clean all</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># yum update</span></span><br></pre></td></tr></table></figure><h3 id="é‡å¯ç³»ç»Ÿ"><a href="#é‡å¯ç³»ç»Ÿ" class="headerlink" title="é‡å¯ç³»ç»Ÿ"></a>é‡å¯ç³»ç»Ÿ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># reboot</span></span><br></pre></td></tr></table></figure><h3 id="æ£€æŸ¥å½“å‰-CentOS-ç³»ç»Ÿç‰ˆæœ¬-1"><a href="#æ£€æŸ¥å½“å‰-CentOS-ç³»ç»Ÿç‰ˆæœ¬-1" class="headerlink" title="æ£€æŸ¥å½“å‰ CentOS ç³»ç»Ÿç‰ˆæœ¬"></a>æ£€æŸ¥å½“å‰ CentOS ç³»ç»Ÿç‰ˆæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat /etc/redhat-release</span></span><br><span class="line"></span><br><span class="line">&gt; CentOS Linux release 7.3.1611 (Core)</span><br></pre></td></tr></table></figure><h3 id="æ£€æŸ¥å½“å‰-CentOS-ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬-1"><a href="#æ£€æŸ¥å½“å‰-CentOS-ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬-1" class="headerlink" title="æ£€æŸ¥å½“å‰ CentOS ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬"></a>æ£€æŸ¥å½“å‰ CentOS ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># uname -sr</span></span><br><span class="line"></span><br><span class="line">&gt; Linux 3.10.0-327.10.1.e17.x86_64</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å½“å‰ç³»ç»Ÿä¸º CentOS 7.3 å·²ç»å‡çº§æˆåŠŸäº†,ä½†ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬ä¾æ—§ä¸º 3.10 å¹¶æ²¡æœ‰å‡çº§,è¿™æ˜¯å› ä¸º CentOS ä¸ºäº†å®‰å…¨å’Œç¨³å®šå¹¶ä¸ä¼šæŠŠç³»ç»Ÿå†…æ ¸å‡çº§åˆ°æœ€æ–°çš„ç‰ˆæœ¬,æ‰€ä»¥ yum update å‘½ä»¤åªä¼šå‡çº§ç³»ç»Ÿç‰ˆæœ¬å’Œæ›´æ–°è½¯ä»¶.æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥å‡çº§ç³»ç»Ÿå†…æ ¸.<br>å‡çº§ CentOS 7.Ã— å†…æ ¸,å¯ç”¨ ELRepo<br>å¤§å¤šæ•°ç°ä»£å‘è¡Œç‰ˆæä¾›äº†ä¸€ç§ä½¿ç”¨ yum ç­‰åŒ…ç®¡ç†ç³»ç»Ÿå’Œå®˜æ–¹æ”¯æŒçš„ä»“åº“å‡çº§å†…æ ¸çš„æ–¹æ³•ã€‚<br>ä½†æ˜¯ï¼Œè¿™åªä¼šå‡çº§å†…æ ¸åˆ°ä»“åº“ä¸­å¯ç”¨çš„æœ€æ–°ç‰ˆæœ¬,è€Œä¸æ˜¯åœ¨ The Linux Kernel Archives ä¸­å¯ç”¨çš„æœ€æ–°ä¸»çº¿ç¨³å®šå†…æ ¸.ä¸å¹¸çš„æ˜¯, Red Hat åªå…è®¸ä½¿ç”¨ yum å‡çº§å†…æ ¸.ä¸ Red Hat ä¸åŒï¼ŒCentOS å…è®¸ä½¿ç”¨ ELRepo,è¿™æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹ä»“åº“,å¯ä»¥å°†å†…æ ¸å‡çº§åˆ°æœ€æ–°ä¸»çº¿ç¨³å®šå†…æ ¸.<br>è¦åœ¨ CentOS 7.Ã— ä¸Šå¯ç”¨ ELRepo ä»“åº“,è¯·è¿è¡Œ:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># rpm -Uvh http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm</span></span><br></pre></td></tr></table></figure><p>ä»“åº“å¯ç”¨åï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åˆ—å‡ºå¯ç”¨çš„ç³»ç»Ÿå†…æ ¸ç›¸å…³åŒ…:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum --disablerepo="*" --enablerepo="elrepo-kernel" list available</span></span><br></pre></td></tr></table></figure></p><p>æ¥ä¸‹æ¥ï¼Œå®‰è£…æœ€æ–°çš„ä¸»çº¿ç¨³å®šå†…æ ¸:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum --enablerepo=elrepo-kernel install kernel-ml</span></span><br></pre></td></tr></table></figure></p><p>ç”±äºç½‘ç»œåŸå› ,ä»¥ä¸Šæ“ä½œå¯èƒ½éœ€è¦ä¸å°‘æ—¶é—´.<br>é‡å¯æœºå™¨ï¼Œæ£€æŸ¥å½“å‰ CentOS ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># uname -sr</span></span><br><span class="line"></span><br><span class="line">&gt; Linux 4.12.0-1.el7.elrepo.x86_64</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥çœ‹åˆ°ç³»ç»Ÿå†…æ ¸å·²ç»å‡çº§åˆ°æœ€æ–°çš„ä¸»çº¿ç¨³å®šå†…æ ¸.<br>è®¾ç½® GRUB é»˜è®¤çš„å†…æ ¸ç‰ˆæœ¬<br>ä¸ºäº†è®©æ–°å®‰è£…çš„å†…æ ¸æˆä¸ºé»˜è®¤å¯åŠ¨é€‰é¡¹ï¼Œä½ éœ€è¦å¦‚ä¸‹ä¿®æ”¹ GRUB é…ç½®,æ‰“å¼€å¹¶ç¼–è¾‘ /etc/default/grub å¹¶è®¾ç½® GRUB_DEFAULT=0.æ„æ€æ˜¯ GRUB åˆå§‹åŒ–é¡µé¢çš„ç¬¬ä¸€ä¸ªå†…æ ¸å°†ä½œä¸ºé»˜è®¤å†…æ ¸.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vi /etc/default/grub</span></span><br><span class="line"></span><br><span class="line">&gt; GRUB_TIMEOUT=5</span><br><span class="line">&gt; GRUB_DISTRIBUTOR=<span class="string">"<span class="variable">$(sed 's, release .*$,,g' /etc/system-release)</span>"</span></span><br><span class="line">&gt; GRUB_DEFAULT=0</span><br><span class="line">&gt; GRUB_DISABLE_SUBMENU=<span class="literal">true</span></span><br><span class="line">&gt; GRUB_TERMINAL_OUTPUT=<span class="string">"console"</span></span><br><span class="line">&gt; GRUB_CMDLINE_LINUX=<span class="string">"crashkernel=auto console=ttyS0 console=tty0 panic=5"</span></span><br><span class="line">&gt; GRUB_DISABLE_RECOVERY=<span class="string">"true"</span></span><br><span class="line">&gt; GRUB_TERMINAL=<span class="string">"serial console"</span></span><br><span class="line">&gt; GRUB_TERMINAL_OUTPUT=<span class="string">"serial console"</span></span><br><span class="line">&gt; GRUB_SERIAL_COMMAND=<span class="string">"serial --speed=9600 --unit=0 --word=8 --parity=no --stop=1"</span></span><br></pre></td></tr></table></figure></p><p>æ¥ä¸‹æ¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥é‡æ–°åˆ›å»ºå†…æ ¸é…ç½®.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># grub2-mkconfig -o /boot/grub2/grub.cfg</span></span><br></pre></td></tr></table></figure></p><p>é‡å¯æœºå™¨ï¼ŒæŸ¥çœ‹ç³»ç»Ÿå½“å‰å†…æ ¸ç‰ˆæœ¬,éªŒè¯æœ€æ–°çš„å†…æ ¸å·²ä½œä¸ºé»˜è®¤å†…æ ¸<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># uname -a</span></span><br><span class="line"></span><br><span class="line">&gt; Linux VM_112_0_centos 4.12.0-1.el7.elrepo.x86_64 <span class="comment">#1 SMP Sun Jul 2 20:38:48 EDT 2017 x86_64 x86_64 x86_64 GNU/Linux</span></span><br></pre></td></tr></table></figure></p><p>åˆ é™¤ CentOS æ›´æ–°åçš„æ—§å†…æ ¸<br>æŸ¥çœ‹ç³»ç»Ÿä¸­å…¨éƒ¨çš„å†…æ ¸ RPM åŒ…:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rpm -qa | grep kernel</span></span><br><span class="line"></span><br><span class="line">&gt; kernel-tools-3.10.0-514.26.2.el7.x86_64</span><br><span class="line">&gt; kernel-devel-3.10.0-514.10.2.el7.x86_64</span><br><span class="line">&gt; kernel-3.10.0-514.26.2.el7.x86_64</span><br><span class="line">&gt; kernel-3.10.0-327.el7.x86_64</span><br><span class="line">&gt; kernel-ml-4.12.0-1.el7.elrepo.x86_64</span><br><span class="line">&gt; kernel-headers-3.10.0-514.26.2.el7.x86_64</span><br><span class="line">&gt; kernel-devel-3.10.0-514.26.2.el7.x86_64</span><br><span class="line">&gt; kernel-tools-libs-3.10.0-514.26.2.el7.x86_64</span><br></pre></td></tr></table></figure></p><p>åˆ é™¤æ—§å†…æ ¸çš„ RPM åŒ…<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum remove kernel-tools-3.10.0-514.26.2.el7.x86_64 kernel-devel-3.10.0-514.10.2.el7.x86_64 kernel-3.10.0-514.26.2.el7.x86_64 kernel-3.10.0-327.el7.x86_64 kernel-headers-3.10.0-514.26.2.el7.x86_64 kernel-devel-3.10.0-514.26.2.el7.x86_64 kernel-tools-libs-3.10.0-514.26.2.el7.x86_64</span><br></pre></td></tr></table></figure></p><p>é‡å¯ç³»ç»Ÿ<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># reboot</span></span><br></pre></td></tr></table></figure></p><h2 id="debian"><a href="#debian" class="headerlink" title="debian"></a>debian</h2><h3 id="æ›´æ–°æºä¸­æ·»åŠ "><a href="#æ›´æ–°æºä¸­æ·»åŠ " class="headerlink" title="æ›´æ–°æºä¸­æ·»åŠ "></a>æ›´æ–°æºä¸­æ·»åŠ </h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/apt/source.list</span><br><span class="line"></span><br><span class="line">deb http://http.debian.net/debian stretch-backports main</span><br><span class="line">deb-src http://http.debian.net/debian stretch-backports main</span><br></pre></td></tr></table></figure><h3 id="æœç´¢-linux-image"><a href="#æœç´¢-linux-image" class="headerlink" title="æœç´¢ linux image"></a>æœç´¢ linux image</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; apt-cache search linux-image</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; apt-get install -t stretch-backports linux-image-amd64</span><br><span class="line">&gt; update-grub</span><br></pre></td></tr></table></figure><h3 id="æ¸…ç†"><a href="#æ¸…ç†" class="headerlink" title="æ¸…ç†"></a>æ¸…ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; apt-get clean</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å†…æ ¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cocos flux æ¶æ„</title>
      <link href="/2018/06/04/cocos-flux-%E6%9E%B6%E6%9E%84/"/>
      <url>/2018/06/04/cocos-flux-%E6%9E%B6%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<p>#å¼€ä¸ªæ–°å‘</p><p><img src="https://1024center-1253758339.cos.ap-shanghai.myqcloud.com/img/flux_flow.png" alt=""></p>]]></content>
      
      
      
        <tags>
            
            <tag> cocos </tag>
            
            <tag> flux </tag>
            
            <tag> cocos js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git hook ç¯å¢ƒå˜é‡</title>
      <link href="/2018/06/01/git-hook-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/"/>
      <url>/2018/06/01/git-hook-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/</url>
      
        <content type="html"><![CDATA[<p>Dockerä¸‹å®‰è£…çš„gogs</p><h2 id="git-hook-æ‰§è¡Œæ—¶çš„ç¯å¢ƒå˜é‡"><a href="#git-hook-æ‰§è¡Œæ—¶çš„ç¯å¢ƒå˜é‡" class="headerlink" title="git hook æ‰§è¡Œæ—¶çš„ç¯å¢ƒå˜é‡"></a>git hook æ‰§è¡Œæ—¶çš„ç¯å¢ƒå˜é‡</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">HOSTNAME=gogs-gogs1                                                                                                                                              </span><br><span class="line">TERM=xterm                                                                                                      </span><br><span class="line">USER=git                                                               </span><br><span class="line">GOGS_REPO_CUSTOM_HOOKS_PATH=/data/git/gogs-repositories/user/gitRepo.git/custom_hooks</span><br><span class="line">GOGS_REPO_ID=2                                                                              </span><br><span class="line">GIT_PUSH_OPTION_COUNT=0                                                                                                       </span><br><span class="line">PATH=/usr/libexec/git-core:/usr/libexec/git-core:/usr/<span class="built_in">local</span>/sbin:/usr/<span class="built_in">local</span>/bin:/usr/sbin:/usr/bin:/sbin:/bin               </span><br><span class="line">PWD=/data/git/gogs-repositories/user/gitRepo.git           </span><br><span class="line">GOGS_REPO_OWNER_NAME=user</span><br><span class="line">GOGS_AUTH_USER_NAME=user</span><br><span class="line">GOGS_REPO_NAME=gitRepo</span><br><span class="line">SHLVL=4                                                                                                </span><br><span class="line">HOME=/data/git                                                                        </span><br><span class="line">SSH_ORIGINAL_COMMAND=1                                                                </span><br><span class="line">GOGS_AUTH_USER_ID=1                                                                   </span><br><span class="line">GOGS_AUTH_USER_EMAIL=xxxx@mail.com</span><br><span class="line">GOGS_CUSTOM=/data/gogs                                                                                             </span><br><span class="line">GOGS_REPO_OWNER_SALT_MD5=94d5344c25db5ceaea76fff71f44dd51</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="æ‰“å°ç¯å¢ƒå˜é‡"><a href="#æ‰“å°ç¯å¢ƒå˜é‡" class="headerlink" title="æ‰“å°ç¯å¢ƒå˜é‡"></a>æ‰“å°ç¯å¢ƒå˜é‡</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env bash</span></span><br><span class="line"><span class="built_in">unset</span> GIT_DIR</span><br><span class="line">env</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”¨Docker æ­å»ºV2Ray</title>
      <link href="/2018/06/01/%E7%94%A8Docker-%E6%90%AD%E5%BB%BAV2Ray/"/>
      <url>/2018/06/01/%E7%94%A8Docker-%E6%90%AD%E5%BB%BAV2Ray/</url>
      
        <content type="html"><![CDATA[<p>docker è¿è¡Œ<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --restart=always --name v2ray -v /path/v2ray:/etc/v2ray -p 7777:1080 v2ray/official v2ray -config=/etc/v2ray/config.json</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>config.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"inbound"</span>: &#123;</span><br><span class="line">    <span class="attr">"port"</span>: <span class="number">1080</span>, <span class="comment">// ç›‘å¬ç«¯å£</span></span><br><span class="line">    <span class="attr">"protocol"</span>: <span class="string">"socks"</span>, <span class="comment">// å…¥å£åè®®ä¸º SOCKS 5</span></span><br><span class="line">    <span class="attr">"settings"</span>: &#123;</span><br><span class="line">      <span class="attr">"auth"</span>: <span class="string">"noauth"</span>  <span class="comment">//socksçš„è®¤è¯è®¾ç½®ï¼Œnoauth ä»£è¡¨ä¸è®¤è¯ï¼Œç”±äº socks é€šå¸¸åœ¨å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œæ‰€ä»¥è¿™é‡Œä¸è®¤è¯</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"outbound"</span>: &#123;</span><br><span class="line">    <span class="attr">"protocol"</span>: <span class="string">"vmess"</span>, <span class="comment">// å‡ºå£åè®®</span></span><br><span class="line">    <span class="attr">"settings"</span>: &#123;</span><br><span class="line">      <span class="attr">"vnext"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"address"</span>: <span class="string">"your.server.com"</span>, <span class="comment">// æœåŠ¡å™¨åœ°å€ï¼Œè¯·ä¿®æ”¹ä¸ºä½ è‡ªå·±çš„æœåŠ¡å™¨ ip æˆ–åŸŸå</span></span><br><span class="line">          <span class="attr">"port"</span>: <span class="number">2000</span>,  <span class="comment">// æœåŠ¡å™¨ç«¯å£</span></span><br><span class="line">          <span class="attr">"users"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">"id"</span>: <span class="string">"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"</span>,  <span class="comment">// ç”¨æˆ· IDï¼Œå¿…é¡»ä¸æœåŠ¡å™¨ç«¯é…ç½®ç›¸åŒ</span></span><br><span class="line">              <span class="attr">"alterId"</span>: <span class="number">64</span> <span class="comment">// æ­¤å¤„çš„å€¼ä¹Ÿåº”å½“ä¸æœåŠ¡å™¨ç›¸åŒ</span></span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åé¢çš„ 7777 å¯ä»¥æ¢æˆè‡ªå·±çš„æœ¬åœ°ç«¯å£ï¼Œå¦‚æœåªé™æœ¬åœ°ä½¿ç”¨å¯ä»¥æ¢æˆ127.0.0.1:7777</p>]]></content>
      
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> v2ray </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonç¬”è®°</title>
      <link href="/2017/06/05/python%E7%AC%94%E8%AE%B0/"/>
      <url>/2017/06/05/python%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="åºåˆ—ç±»å‹"><a href="#åºåˆ—ç±»å‹" class="headerlink" title="åºåˆ—ç±»å‹"></a>åºåˆ—ç±»å‹</h1><p>6ç§ï¼šåˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ã€Unicodeå­—ç¬¦ä¸²ã€bufferå¯¹è±¡ã€xrangeå¯¹è±¡</p><h2 id="åˆ—è¡¨ï¼ˆlistï¼‰"><a href="#åˆ—è¡¨ï¼ˆlistï¼‰" class="headerlink" title="åˆ—è¡¨ï¼ˆlistï¼‰"></a>åˆ—è¡¨ï¼ˆlistï¼‰</h2><h3 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"a"</span> + <span class="string">"b"</span> <span class="comment"># &gt;&gt;&gt; ab</span></span><br><span class="line"></span><br><span class="line"><span class="string">"ab"</span> * <span class="number">2</span> <span class="comment"># &gt;&gt;&gt; abab</span></span><br><span class="line">[<span class="literal">None</span>] * <span class="number">10</span> <span class="comment"># &gt;&gt;&gt; [None, None, None ... None]</span></span><br><span class="line"></span><br><span class="line"><span class="string">"p"</span> <span class="keyword">in</span> <span class="string">"python"</span> <span class="comment"># æ£€æµ‹æ˜¯å¦åŒ…å« return Ture or False</span></span><br><span class="line"></span><br><span class="line">numbers = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>]</span><br><span class="line">len(numbers) <span class="comment"># 3</span></span><br><span class="line">max(numbers) <span class="comment"># 5</span></span><br><span class="line">min(numbers) <span class="comment"># 1</span></span><br><span class="line"></span><br><span class="line">list(<span class="string">"Hello"</span>) <span class="comment"># ["H", "e", "l", "l", "o"]</span></span><br><span class="line"></span><br><span class="line">numbers[<span class="number">1</span>] = <span class="number">20</span> <span class="comment"># èµ‹å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> numbers[<span class="number">0</span>] <span class="comment"># åˆ é™¤é¦–ä¸ªå…ƒç´ </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ†ç‰‡æ“ä½œ</span></span><br><span class="line">data[start:end:interval]</span><br><span class="line"><span class="comment"># startï¼šèµ·å§‹ä½ç½®ï¼ˆçœç•¥ä»£è¡¨å¼€å§‹ï¼‰ endï¼šç»“æŸä½ç½®ï¼ˆçœç•¥ä»£è¡¨åˆ°ç»“æŸï¼‰ intervalï¼šæ­¥é•¿ï¼ˆä¸ä¸º0ï¼Œæ­£æ•°ä»å·¦åˆ°æœ‰ï¼Œè´Ÿæ•°ä»åˆåˆ°å·¦ï¼‰</span></span><br><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">numbers[<span class="number">1</span>: <span class="number">4</span>] = [] <span class="comment"># numbers å€¼ä¸º [1, 5]</span></span><br><span class="line"></span><br><span class="line">numbers.append(<span class="number">2</span>) <span class="comment"># numbers å€¼ä¸º [1, 5, 2]</span></span><br><span class="line"></span><br><span class="line">numbers.count(<span class="number">1</span>) <span class="comment"># ç»Ÿè®¡å‚æ•°åœ¨æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°</span></span><br><span class="line"></span><br><span class="line">numbers.extend([<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]) <span class="comment"># numbers å€¼ä¸º[1, 5, 2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line">numbers.index(<span class="number">3</span>) <span class="comment"># æŸ¥æ‰¾å…ƒç´ ä½ç½®</span></span><br><span class="line">numbers.pop(<span class="number">0</span>) <span class="comment"># å¼¹å‡ºé¦–ä¸ªå€¼(ä¿®æ”¹äº†åŸæ•°ç»„)</span></span><br><span class="line">numbers.reverse() <span class="comment"># åè½¬åˆ—è¡¨</span></span><br><span class="line">numbers.sort() <span class="comment"># æ’åº</span></span><br></pre></td></tr></table></figure><h2 id="å…ƒç»„"><a href="#å…ƒç»„" class="headerlink" title="å…ƒç»„"></a>å…ƒç»„</h2><p>ä¸å¯ä¿®æ”¹<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">a = (<span class="number">1</span>, )</span><br><span class="line">a = tuple([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]) <span class="comment"># a ä¸º (1, 2, 3)</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>skynetåŸºç¡€</title>
      <link href="/2017/05/16/skynet%E5%9F%BA%E7%A1%80/"/>
      <url>/2017/05/16/skynet%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="Skynet-åŸºç¡€ç¬”è®°"><a href="#Skynet-åŸºç¡€ç¬”è®°" class="headerlink" title="Skynet åŸºç¡€ç¬”è®°"></a><a href="https://github.com/cloudwu/skynet/wiki" target="_blank" rel="noopener">Skynet åŸºç¡€ç¬”è®°</a></h1><p>æ–¹ä¾¿è‡ªå·±æŸ¥è¯¢</p><h2 id="Config"><a href="#Config" class="headerlink" title="Config"></a><a href="https://github.com/cloudwu/skynet/wiki/Config" target="_blank" rel="noopener">Config</a></h2><p>å¯åŠ¨ skynet æœåŠ¡å™¨éœ€è¦æä¾›ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶çš„ç¼–å†™å¯ä»¥å‚è€ƒ examples/config ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„é…ç½®æ–‡ä»¶èŒƒä¾‹ï¼š<br><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">root = <span class="string">"./"</span></span><br><span class="line">thread = <span class="number">8</span></span><br><span class="line">logger = <span class="literal">nil</span></span><br><span class="line">harbor = <span class="number">1</span></span><br><span class="line">address = <span class="string">"127.0.0.1:2526"</span></span><br><span class="line">master = <span class="string">"127.0.0.1:2013"</span></span><br><span class="line">start = <span class="string">"main"</span><span class="comment">-- main script</span></span><br><span class="line">bootstrap = <span class="string">"snlua bootstrap"</span><span class="comment">-- The service for bootstrap</span></span><br><span class="line">standalone = <span class="string">"0.0.0.0:2013"</span></span><br><span class="line">luaservice = root..<span class="string">"service/?.lua;"</span>..root..<span class="string">"test/?.lua;"</span>..root..<span class="string">"examples/?.lua"</span></span><br><span class="line">lualoader = <span class="string">"lualib/loader.lua"</span></span><br><span class="line">snax = root..<span class="string">"examples/?.lua;"</span>..root..<span class="string">"test/?.lua"</span></span><br><span class="line"><span class="built_in">cpath</span> = root..<span class="string">"cservice/?.so"</span></span><br></pre></td></tr></table></figure><br>è¿™ä¸ªé…ç½®æ–‡ä»¶å®é™…ä¸Šå°±æ˜¯ä¸€æ®µ lua ä»£ç ï¼Œé€šå¸¸ï¼Œæˆ‘ä»¬ä»¥ key = value çš„å½¢å¼å¯¹é…ç½®é¡¹èµ‹å€¼ã€‚skynet åœ¨å¯åŠ¨æ—¶ï¼Œä¼šè¯»å–é‡Œé¢å¿…è¦çš„é…ç½®é¡¹ï¼Œå¹¶å°†æš‚æ—¶ç”¨ä¸åˆ°çš„é…ç½®é¡¹ä»¥å­—ç¬¦ä¸²å½¢å¼ä¿å­˜åœ¨ skynet å†…éƒ¨çš„ env è¡¨ä¸­ã€‚è¿™äº›é…ç½®é¡¹å¯ä»¥é€šè¿‡ skynet.getenv è·å–ã€‚<br>å¿…è¦çš„é…ç½®é¡¹æœ‰ï¼š</p><ul><li>thread å¯åŠ¨å¤šå°‘ä¸ªå·¥ä½œçº¿ç¨‹ã€‚é€šå¸¸ä¸è¦å°†å®ƒé…ç½®è¶…è¿‡ä½ å®é™…æ‹¥æœ‰çš„ CPU æ ¸å¿ƒæ•°ã€‚</li><li>bootstrap skynet å¯åŠ¨çš„ç¬¬ä¸€ä¸ªæœåŠ¡ä»¥åŠå…¶å¯åŠ¨å‚æ•°ã€‚é»˜è®¤é…ç½®ä¸º snlua bootstrap ï¼Œå³å¯åŠ¨ä¸€ä¸ªåä¸º bootstrap çš„ lua æœåŠ¡ã€‚é€šå¸¸æŒ‡çš„æ˜¯ service/bootstrap.lua è¿™æ®µä»£ç ã€‚</li><li>cpath ç”¨ C ç¼–å†™çš„æœåŠ¡æ¨¡å—çš„ä½ç½®ï¼Œé€šå¸¸æŒ‡ cservice ä¸‹é‚£äº› .so æ–‡ä»¶ã€‚å¦‚æœä½ çš„ç³»ç»Ÿçš„åŠ¨æ€åº“ä¸æ˜¯ä»¥ .so ä¸ºåç¼€ï¼Œéœ€è¦åšç›¸åº”çš„ä¿®æ”¹ã€‚è¿™ä¸ªè·¯å¾„å¯ä»¥é…ç½®å¤šé¡¹ï¼Œä»¥ ; åˆ†å‰²ã€‚<a id="more"></a></li></ul><h2 id="DataCenter"><a href="#DataCenter" class="headerlink" title="DataCenter"></a><a href="https://github.com/cloudwu/skynet/wiki/DataCenter" target="_blank" rel="noopener">DataCenter</a></h2><p>datacenter ç±»ä¼¼ä¸€ä¸ªå…¨ç½‘ç»œå…±äº«çš„æ³¨å†Œè¡¨ã€‚å®ƒæ˜¯ä¸€ä¸ªæ ‘ç»“æ„ï¼Œä»»ä½•äººéƒ½å¯ä»¥å‘å…¶ä¸­å†™å…¥ä¸€äº›åˆæ³•çš„ lua æ•°æ®ï¼Œå…¶å®ƒæœåŠ¡å¯ä»¥ä»ä¸­å–å‡ºæ¥ã€‚æ‰€ä»¥ä½ å¯ä»¥æŠŠä¸€äº›éœ€è¦è·¨èŠ‚ç‚¹è®¿é—®çš„æœåŠ¡ï¼Œè‡ªå·±æŠŠå…¶åœ°å€è®°åœ¨ datacenter ä¸­ï¼Œéœ€è¦çš„äººå¯ä»¥è¯»å‡ºã€‚<br>datacenter æ˜¯ä¸€ä¸ª lua åº“ï¼Œä½¿ç”¨ï¼š<br><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> datacenter = <span class="built_in">require</span> <span class="string">"datacenter"</span></span><br><span class="line"></span><br><span class="line">datacenter.set(key1, key2, ... , value) <span class="comment">--  å¯ä»¥å‘ key1.key2 è®¾ç½®ä¸€ä¸ªå€¼ value ã€‚è¿™ä¸ª api è‡³å°‘éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œæ²¡æœ‰ç‰¹åˆ«é™åˆ¶æ ‘ç»“æ„çš„å±‚çº§æ•°ã€‚</span></span><br><span class="line">datacenter.get(key1, key2, ...) <span class="comment">-- ä» key1.key2 è¯»ä¸€ä¸ªå€¼ã€‚è¿™ä¸ª api è‡³å°‘éœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œå¦‚æœä¼ å…¥å¤šä¸ªå‚æ•°ï¼Œåˆ™ç”¨æ¥è¯»å‡ºæ ‘çš„ä¸€ä¸ªåˆ†æ”¯ã€‚</span></span><br><span class="line">datacenter.wait(key1, key2, ...) <span class="comment">--  åŒ get æ–¹æ³•ï¼Œä½†å¦‚æœè¯»å–çš„åˆ†æ”¯ä¸º nil æ—¶ï¼Œè¿™ä¸ªå‡½æ•°ä¼šé˜»å¡ï¼Œç›´åˆ°æœ‰äººæ›´æ–°è¿™ä¸ªåˆ†æ”¯æ‰è¿”å›ã€‚å½“è¯»å†™æ¬¡åºä¸ç¡®å®šï¼Œä½†ä½ éœ€è¦è¯»åˆ°å…¶å®ƒåœ°æ–¹å†™å…¥çš„æ•°æ®åå†åšåç»­äº‹æƒ…æ—¶ï¼Œç”¨å®ƒæ¯”å¾ªç¯å°è¯•è¯»å–è¦å¥½çš„å¤šã€‚wait å¿…é¡»ä½œç”¨äºä¸€ä¸ªå¶èŠ‚ç‚¹ï¼Œä¸èƒ½ç­‰å¾…ä¸€ä¸ªåˆ†æ”¯ã€‚</span></span><br></pre></td></tr></table></figure></p><h2 id="UniqueService"><a href="#UniqueService" class="headerlink" title="UniqueService"></a><a href="https://github.com/cloudwu/skynet/wiki/UniqueService" target="_blank" rel="noopener">UniqueService</a></h2><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ skynet.newservice å¯åŠ¨ä¸€ä¸ª lua ç¼–å†™çš„æœåŠ¡ã€‚åŒä¸€æ®µè„šæœ¬å¯ä»¥å¯åŠ¨å¤šä»½ï¼Œæ¯ä¸ªæœ‰ä¸åŒçš„åœ°å€ã€‚åœ°å€æ˜¯åŒºåˆ†ä¸åŒæœåŠ¡çš„å”¯ä¸€æ ‡è¯†ã€‚<br>ä½†æœ‰æ—¶ï¼Œæ•´ä¸ªç³»ç»Ÿä¸­è§£å†³ä¸€ç±»äº‹åŠ¡åªéœ€è¦ä¸€ä¸ªæœåŠ¡ï¼Œåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œå®ƒä¾¿å¯åŠ¨å¥½ï¼Œè€Œå…¶å®ƒæœåŠ¡éœ€è¦çŸ¥é“å®ƒçš„åœ°å€ä»¥ä¾¿äºä½¿ç”¨å®ƒã€‚è¿™ä¸ªæ—¶å€™ï¼Œä½¿ç”¨ skynet.uniqueservice æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚<br>skynet.uniqueservice å’Œ skynet.newservice çš„è¾“å…¥å‚æ•°ç›¸åŒï¼Œéƒ½å¯ä»¥ä»¥ä¸€ä¸ªè„šæœ¬åç§°æ‰¾åˆ°ä¸€æ®µ lua è„šæœ¬å¹¶å¯åŠ¨å®ƒï¼Œè¿”å›è¿™ä¸ªæœåŠ¡çš„åœ°å€ã€‚ä½†å’Œ newservice ä¸åŒï¼Œæ¯ä¸ªåå­—çš„è„šæœ¬åœ¨åŒä¸€ä¸ª skynet èŠ‚ç‚¹åªä¼šå¯åŠ¨ä¸€æ¬¡ã€‚å¦‚æœå·²æœ‰åŒåæœåŠ¡å¯åŠ¨æˆ–å¯åŠ¨ä¸­ï¼Œåè°ƒç”¨çš„äººè·å¾—çš„æ˜¯å‰ä¸€æ¬¡å¯åŠ¨çš„æœåŠ¡çš„åœ°å€ã€‚<br>å¾ˆå¤šskynet åº“éƒ½é™„å¸¦æœ‰ä¸€ä¸ªç‹¬ç«‹æœåŠ¡ï¼Œä½ å¯ä»¥åœ¨åº“çš„åˆå§‹åŒ–æ—¶ï¼Œå†™ä¸Šç±»ä¼¼çš„è¯­å¥ï¼š<br><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> SERVICE</span><br><span class="line">skynet.init(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  SERVICE = skynet.uniqueservice <span class="string">"foobar"</span></span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure><br>è¿™ä¸ªèŒƒä¾‹ä¼šæ³¨å†Œä¸€ä¸ªåˆå§‹åŒ–å‡½æ•°å»åˆå§‹åŒ– SERVICE å˜é‡ã€‚è€Œä½ çš„åº“å‡½æ•°å°±å¯ä»¥ä½¿ç”¨ SERVICE è¿™ä¸ªåœ°å€æ¥è®¿é—®å¯¹åº”çš„å”¯ä¸€çš„ foobar æœåŠ¡äº†ã€‚<br>å’Œ DataCenter ä¸åŒï¼Œuniqueservice æ˜¯ä¸€ä¸ªä¸“ç”¨äºæœåŠ¡ç®¡ç†çš„æ¨¡å—ã€‚å®ƒåœ¨æœåŠ¡åœ°å€ç®¡ç†ä¸Šåšäº†ç‰¹åˆ«çš„ä¼˜åŒ–ã€‚å› ä¸ºå¯¹äºåŒä¸€ä¸ªåå­—ï¼Œåªå…è®¸å¯åŠ¨ä¸€æ¬¡ï¼Œä¸”ä¸å‡†æ›´æ¢ã€‚æ‰€ä»¥ï¼Œåœ¨å®ç°ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¯ä¸ªèŠ‚ç‚¹ç¼“å­˜æŸ¥è¯¢è¿‡çš„ç»“æœï¼Œè€Œä¸å¿…æ¯æ¬¡éƒ½å»ä¸­å¿ƒèŠ‚ç‚¹æŸ¥è¯¢ã€‚</p><h2 id="LuaAPI"><a href="#LuaAPI" class="headerlink" title="LuaAPI"></a><a href="https://github.com/cloudwu/skynet/wiki/LuaAPI" target="_blank" rel="noopener">LuaAPI</a></h2><p>skynet æä¾›äº†ä¸€ä¸ªå«åš skynet çš„ lua æ¨¡å—æä¾›ç»™ snlua æœåŠ¡æ‰¿è½½çš„ Lua è„šæœ¬ä½¿ç”¨ã€‚ä½ åªéœ€è¦ç¼–å†™ä¸€ä¸ªåç¼€ä¸º .lua çš„è„šæœ¬æ–‡ä»¶ï¼ŒæŠŠæ–‡ä»¶åä½œä¸ºå¯åŠ¨å‚æ•°ï¼Œå¯åŠ¨ snlua å³å¯ã€‚ï¼ˆå…³äºè„šæœ¬è·¯å¾„çš„é…ç½®ï¼Œè§ Configï¼‰<br>é€šå¸¸ï¼Œä½ éœ€è¦åœ¨è„šæœ¬çš„ç¬¬ä¸€è¡Œå†™ä¸Šï¼š<br><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> skynet = <span class="built_in">require</span> <span class="string">"skynet"</span></span><br></pre></td></tr></table></figure><br>æ³¨ï¼šskynet è¿™ä¸ªæ¨¡å—ä¸èƒ½åœ¨ skynet æ¡†æ¶ä¹‹å¤–ä½¿ç”¨ï¼Œæ‰€ä»¥ä½ ç”¨æ ‡å‡†çš„ lua è§£æå™¨è¿è¡ŒåŒ…å«äº† skynet æ¨¡å—çš„ä»£ç ä¼šç«‹å³å‡ºé”™ã€‚è¿™æ˜¯å› ä¸ºï¼Œæ¯ä¸ª skynet æœåŠ¡éƒ½ä¾èµ–ä¸€ä¸ª skynet_context çš„ C å¯¹è±¡ï¼Œå®ƒæ˜¯ç”± snlua å¯¼å…¥åˆ° lua è™šæ‹Ÿæœºä¸­çš„ã€‚<br>æ¯ä¸ª skynet æœåŠ¡ï¼Œæœ€é‡è¦çš„èŒè´£å°±æ˜¯å¤„ç†åˆ«çš„æœåŠ¡å‘é€è¿‡æ¥çš„æ¶ˆæ¯ï¼Œä»¥åŠå‘åˆ«çš„æœåŠ¡å‘é€æ¶ˆæ¯ã€‚æ¯æ¡ skynet æ¶ˆæ¯ç”±äº”ä¸ªå…ƒç´ æ„æˆã€‚</p><ol><li>session ï¼šå¤§éƒ¨åˆ†æ¶ˆæ¯å·¥ä½œåœ¨è¯·æ±‚å›åº”æ¨¡å¼ä¸‹ã€‚å³ï¼Œä¸€ä¸ªæœåŠ¡å‘å¦ä¸€ä¸ªæœåŠ¡å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œè€Œåæ”¶åˆ°è¯·æ±‚çš„æœåŠ¡åœ¨å¤„ç†å®Œè¯·æ±‚æ¶ˆæ¯åï¼Œå›å¤ä¸€æ¡æ¶ˆæ¯ã€‚session æ˜¯ç”±å‘èµ·è¯·æ±‚çš„æœåŠ¡ç”Ÿæˆçš„ï¼Œå¯¹å®ƒè‡ªå·±å”¯ä¸€çš„æ¶ˆæ¯æ ‡è¯†ã€‚å›åº”æ–¹åœ¨å›åº”æ—¶ï¼Œå°† session å¸¦å›ã€‚è¿™æ ·å‘é€æ–¹æ‰èƒ½è¯†åˆ«å‡ºå“ªæ¡æ¶ˆæ¯æ˜¯é’ˆå¯¹å“ªæ¡çš„å›åº”ã€‚session æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ï¼Œå½“ä¸€æ¡æ¶ˆæ¯ä¸éœ€è¦å›åº”æ—¶ï¼ŒæŒ‰æƒ¯ä¾‹ï¼Œä½¿ç”¨ 0 è¿™ä¸ªç‰¹æ®Šçš„ session å·ã€‚session ç”± skynet æ¡†æ¶ç”Ÿæˆç®¡ç†ï¼Œé€šå¸¸ä¸éœ€è¦ä½¿ç”¨è€…å…³å¿ƒã€‚</li><li>source ï¼šæ¶ˆæ¯æºã€‚æ¯ä¸ªæœåŠ¡éƒ½ç”±ä¸€ä¸ª 32bit æ•´æ•°æ ‡è¯†ã€‚è¿™ä¸ªæ•´æ•°å¯ä»¥çœ‹æˆæ˜¯æœåŠ¡åœ¨ skynet ç³»ç»Ÿä¸­çš„åœ°å€ã€‚å³ä½¿åœ¨æœåŠ¡é€€å‡ºåï¼Œæ–°å¯åŠ¨çš„æœåŠ¡é€šå¸¸ä¹Ÿä¸ä¼šä½¿ç”¨å·²ç”¨è¿‡çš„åœ°å€ï¼ˆé™¤éå‘ç”Ÿå›ç»•ï¼Œä½†ä¸€èˆ¬é—´éš”æ—¶é—´éå¸¸é•¿ï¼‰ã€‚æ¯æ¡æ”¶åˆ°çš„æ¶ˆæ¯éƒ½æºå¸¦æœ‰ source ï¼Œæ–¹ä¾¿åœ¨å›åº”çš„æ—¶å€™å¯ä»¥æŒ‡å®šåœ°å€ã€‚ä½†åœ°å€çš„ç®¡ç†é€šå¸¸ç”±æ¡†æ¶å®Œæˆï¼Œç”¨æˆ·ä¸ç”¨å…³å¿ƒã€‚</li><li>type ï¼šæ¶ˆæ¯ç±»åˆ«ã€‚æ¯ä¸ªæœåŠ¡å¯ä»¥æ¥æ”¶ 256 ç§ä¸åŒç±»åˆ«çš„æ¶ˆæ¯ã€‚æ¯ç§ç±»åˆ«å¯ä»¥æœ‰ä¸åŒçš„æ¶ˆæ¯ç¼–ç æ ¼å¼ã€‚æœ‰åå‡ ç§ç±»åˆ«æ˜¯æ¡†æ¶ä¿ç•™çš„ï¼Œé€šå¸¸ä¹Ÿä¸å»ºè®®ç”¨æˆ·å®šä¹‰æ–°çš„æ¶ˆæ¯ç±»åˆ«ã€‚å› ä¸ºç”¨æˆ·å®Œå…¨å¯ä»¥åˆ©ç”¨å·²æœ‰çš„ç±»åˆ«ï¼Œè€Œç”¨å…·ä½“çš„æ¶ˆæ¯å†…å®¹æ¥åŒºåˆ†æ¯æ¡å…·ä½“çš„å«ä¹‰ã€‚æ¡†æ¶æŠŠè¿™äº› type æ˜ å°„ä¸ºå­—ç¬¦ä¸²ä¾¿äºè®°å¿†ã€‚æœ€å¸¸ç”¨çš„æ¶ˆæ¯ç±»åˆ«åä¸º â€œluaâ€ å¹¿æ³›ç”¨äºç”¨ lua ç¼–å†™çš„ skynet æœåŠ¡é—´çš„é€šè®¯ã€‚</li><li>messsage ï¼šæ¶ˆæ¯çš„ C æŒ‡é’ˆï¼Œåœ¨ Lua å±‚çœ‹æ¥æ˜¯ä¸€ä¸ª lightuserdata ã€‚æ¡†æ¶ä¼šéšè—è¿™ä¸ªç»†èŠ‚ï¼Œæœ€ç»ˆç”¨æˆ·å¤„ç†çš„æ˜¯ç»è¿‡è§£ç è¿‡çš„ lua å¯¹è±¡ã€‚åªæœ‰æå°‘æƒ…å†µï¼Œä½ æ‰éœ€è¦åœ¨ lua å±‚ç›´æ¥æ“ä½œè¿™ä¸ªæŒ‡é’ˆã€‚</li><li>size ï¼šæ¶ˆæ¯çš„é•¿åº¦ã€‚é€šå¸¸å’Œ message ä¸€èµ·ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> skynet </tag>
            
            <tag> game server </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¸¸æˆæˆ˜æ–—ç³»ç»Ÿè®¾è®¡</title>
      <link href="/2017/04/14/%E6%B8%B8%E6%88%8F%E6%88%98%E6%96%97%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/"/>
      <url>/2017/04/14/%E6%B8%B8%E6%88%8F%E6%88%98%E6%96%97%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="æ€»ä½“"><a href="#æ€»ä½“" class="headerlink" title="æ€»ä½“"></a>æ€»ä½“</h1><ul><li>æ¸¸æˆç®¡ç†ç±»<ul><li>æ—¶é—´æ­¥è¿›å™¨</li><li>æ“ä½œç±»</li><li>æˆ˜æ–—è®°å½•ç±»</li></ul></li><li>æˆ˜æ–—åŒ…å«ç±»<ul><li>åœºæ™¯</li><li>å†›å£«</li><li>æŠ€èƒ½(Buff)</li></ul></li></ul><a id="more"></a><h1 id="æ¸¸æˆç®¡ç†ç±»"><a href="#æ¸¸æˆç®¡ç†ç±»" class="headerlink" title="æ¸¸æˆç®¡ç†ç±»"></a>æ¸¸æˆç®¡ç†ç±»</h1><h2 id="æ—¶é—´æ­¥è¿›å™¨"><a href="#æ—¶é—´æ­¥è¿›å™¨" class="headerlink" title="æ—¶é—´æ­¥è¿›å™¨"></a>æ—¶é—´æ­¥è¿›å™¨</h2><p>ç”¨äºæ¨è¿›æ•´ä¸ªæ¸¸æˆçš„è¿›è¡Œ,æŒ‰æ—¶é—´é—´éš”æ¨è¿›æ•´ä¸ªæ¸¸æˆè¿›è¡Œ,åˆ·æ–°åœºæ™¯ç±»çŠ¶æ€,ä¼ è¾“æ¯ä¸€æ¬¡çš„æ—¶é—´åˆ·æ–°é—´éš”</p><h2 id="æ“ä½œç±»"><a href="#æ“ä½œç±»" class="headerlink" title="æ“ä½œç±»"></a>æ“ä½œç±»</h2><p>ç”¨äºæ•´ä¸ªæˆ˜æ–—çš„è¾“å…¥ç³»ç»Ÿ</p><h2 id="æˆ˜æ–—è®°å½•ç±»"><a href="#æˆ˜æ–—è®°å½•ç±»" class="headerlink" title="æˆ˜æ–—è®°å½•ç±»"></a>æˆ˜æ–—è®°å½•ç±»</h2><p>å°†æˆ˜æ–—ç³»ç»Ÿè¿›è¡Œæ‰“è°±è®°å½•,ç”¨äºæˆ˜æ–—æ’­æŠ¥å’Œæˆ˜æ–—æ ¡éªŒ</p><h1 id="æˆ˜æ–—åŒ…å«ç±»"><a href="#æˆ˜æ–—åŒ…å«ç±»" class="headerlink" title="æˆ˜æ–—åŒ…å«ç±»"></a>æˆ˜æ–—åŒ…å«ç±»</h1><h2 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h2><p>æˆ˜æ–—åœºæ™¯ç±»,åŒ…å«æˆ˜æ–—åæ ‡ç³»ç»Ÿ,ç®¡ç†å†›å£«ç±»</p><p>æ¥å£éƒ¨åˆ†</p><ul><li>æ–½æ”¾</li><li>ç§»åŠ¨</li><li>åˆ·æ–°æŠ€èƒ½çŠ¶æ€</li></ul><h2 id="å†›å£«"><a href="#å†›å£«" class="headerlink" title="å†›å£«"></a>å†›å£«</h2><p>å†›å£«ç±»,åŒ…å«å±æ€§,æ‹¥æœ‰æŠ€èƒ½ç»„,Buffç»„,è¡¨ç°ç®¡ç†,ç§»åŠ¨é€Ÿåº¦ç­‰<br>æ­¤å¤„å°†åœºæ™¯ä¸Šæ‰€æœ‰ç‰©ä½“è®¾è®¡æˆå†›å£«,åŒ…æ‹¬éšœç¢(æ‹¥æœ‰è¡€é‡,æ— æ•Œçš„å†›å£«)</p><p>æ¥å£éƒ¨åˆ†</p><ul><li>çŠ¶æ€åˆ·æ–°</li></ul><h2 id="æŠ€èƒ½-Buff"><a href="#æŠ€èƒ½-Buff" class="headerlink" title="æŠ€èƒ½(Buff)"></a>æŠ€èƒ½(Buff)</h2><p>æŠ€èƒ½ç³»ç»Ÿ,åŒ…å«æŠ€èƒ½æ•ˆæœ,æŠ€èƒ½æŒç»­æ—¶é—´,è¡¨ç°æ—¶é—´,é‡Šæ”¾è·ç¦»,ä¼¤å®³ç±»å‹<br>å°†æ‰€æœ‰æŠ€èƒ½,æ™®æ”»ç­‰ä¸€åˆ‡ä¸ä¼¤å®³ç›¸å…³çš„æ•´åˆæˆBuffæ•ˆæœ</p><p>æ¥å£éƒ¨åˆ†</p><ul><li>æ–½æ”¾(æ–½æ”¾ç›®æ ‡, å‘½ä¸­ç›®æ ‡)</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> æ¸¸æˆ </tag>
            
            <tag> æˆ˜æ–— </tag>
            
            <tag> è®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¸¸æˆæ¡†æ¶æ¢ç´¢</title>
      <link href="/2017/04/05/%E6%B8%B8%E6%88%8F%E6%A1%86%E6%9E%B6%E6%8E%A2%E7%B4%A2/"/>
      <url>/2017/04/05/%E6%B8%B8%E6%88%8F%E6%A1%86%E6%9E%B6%E6%8E%A2%E7%B4%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h1><ul><li>Event<br>æ‰€æœ‰å¯¹è±¡éƒ½èƒ½é€šè¿‡Eventç®¡ç†å™¨æŠ›å‡ºäº‹ä»¶ã€‚Eventå¯¹è±¡åº”åŒ…å«æœ‰Classå¯¹è±¡æœ¬èº«ã€æ‰€ç»‘å®šçš„äº‹ä»¶åã€ä»¥åŠå…·ä½“çš„å›æ‰ã€‚</li><li>EventSet<br>ç®¡ç†æ‰€æœ‰çš„Eventäº‹ä»¶ï¼Œé€šè¿‡Eventæ‰€ç›‘å¬çš„Keyå€¼ä»¥åŠä¼˜å…ˆçº§ï¼Œå»è°ƒç”¨Eventäº‹ä»¶ã€‚</li><li>BaseClass<br>æ­¤ç±»åº”ä¸ºæ‰€æœ‰ç±»çš„åŸºç±»ï¼Œå…·æœ‰é€šè¿‡EventSetå•ä¾‹ç»‘å®šç»‘å®šä»¥åŠè§£ç»‘äº‹ä»¶çš„åŸºç¡€æ–¹æ³•ã€‚</li></ul><a id="more"></a><h1 id="æ•´ä½“åˆ†å±‚"><a href="#æ•´ä½“åˆ†å±‚" class="headerlink" title="æ•´ä½“åˆ†å±‚"></a>æ•´ä½“åˆ†å±‚</h1><p>ä»¥ä¸‹æ‰€æœ‰ç±»éƒ½ç»§æ‰¿è‡ªBaseClassï¼Œå—äº‹ä»¶ç®¡ç†å½±å“ã€‚æ–¹ä¾¿è¿›è¡Œæ•°æ®ä¼ è¾“ä»¥åŠæ¶ˆæ¯å›æ‰ã€‚</p><h2 id="UIå±‚"><a href="#UIå±‚" class="headerlink" title="UIå±‚"></a>UIå±‚</h2><p>ä¼˜å…ˆçº§ä»ä¸Šè‡³ä¸‹å¤§è‡´åˆ†ä¸º</p><ul><li>Error Tip<br>   ç‰¹æ®Šå¼¹çª—ç®¡ç†å±‚</li><li>Tip<br>   æ™®é€šå¼¹çª—ç®¡ç†å±‚</li><li>Module<br>   åŠŸèƒ½æ¨¡å—å±‚ä¸­ï¼Œåº”åˆ†ä¸ºPushå’ŒReplaceä¸¤ç§æƒ…å†µå»å…¼å®¹ä¸šåŠ¡<ul><li>Push ä¸ºä»å½“å‰ç•Œé¢å±‚å å…³ç³»</li><li>Replace ä¸ºæ¸…é™¤å½“å‰UIæ ˆ</li></ul></li><li>Scene<br>   æ°¸ä¸é‡Šæ”¾ï¼Œåœ¨æœ€åº•å±‚</li></ul><p>åœ¨æ­¤å±‚æ€»æœ€å¥½å…¼é¡¾åˆ°äº§å“åŸ‹ç‚¹çš„éœ€æ±‚ã€‚</p><h2 id="æ ¸å¿ƒç©æ³•å±‚"><a href="#æ ¸å¿ƒç©æ³•å±‚" class="headerlink" title="æ ¸å¿ƒç©æ³•å±‚"></a>æ ¸å¿ƒç©æ³•å±‚</h2><p>æ­¤åŠŸèƒ½ç‹¬ç«‹æ¸¸æˆUIå¤–ï¼Œéœ€è§†æƒ…å†µå¤„ç†ä¸UIå±‚çš„å…³ç³»</p><h2 id="é€»è¾‘å±‚"><a href="#é€»è¾‘å±‚" class="headerlink" title="é€»è¾‘å±‚"></a>é€»è¾‘å±‚</h2><p>æ¸¸æˆä¸­æ•°æ®å¤„ç†ä»¥åŠä¿å­˜çš„åœ°æ–¹</p><h2 id="é€šä¿¡å±‚"><a href="#é€šä¿¡å±‚" class="headerlink" title="é€šä¿¡å±‚"></a>é€šä¿¡å±‚</h2><p>ä¸æœåŠ¡ç«¯é€šä¿¡çš„ä¸­é—´ä»¶ï¼Œæ­¤åŠŸèƒ½ä¸»è¦ç”¨äºæ”¶å‘æ¶ˆæ¯ä»¥åŠæ”¶åˆ°æ¶ˆæ¯åæŠ›äº‹ä»¶ç»™éœ€è¦ç”¨åˆ°æ­¤æ¶ˆæ¯çš„UIå’Œé€»è¾‘å±‚å¤„ç†ã€‚</p><h1 id="å‰æœŸæ³¨æ„"><a href="#å‰æœŸæ³¨æ„" class="headerlink" title="å‰æœŸæ³¨æ„"></a>å‰æœŸæ³¨æ„</h1><ul><li>æ‰€æœ‰è¯»è¡¨å­—æ®µé€šè¿‡ä¸“é—¨å‡½æ•°å»è¯»å–<br>  æ­¤é¡¹ä¸»è¦æ˜¯ä¸ºä»¥åå¤šè¯­è¨€åŒ–çš„ä¸œè¥¿ç•™å‘åšå‡†å¤‡ï¼Œé¿å…åœ¨æˆ˜ç•¥éœ€è¦æ—¶ç¨‹åºé¢ä¸´å¤§é‡æ”¹åŠ¨ã€‚</li><li>ä¸€äº›å”¯ä¸€Keyå€¼çš„é›†ä¸­ç®¡ç†<br>  ä¸»è¦é¿å…Keyå€¼çš„é‡å¤å¯¼è‡´å‡ºå¥‡æ€ªé—®é¢˜ã€‚</li><li>å®¢æˆ·ç«¯æœ¬åœ°é€»è¾‘å’Œä¸šåŠ¡é€»è¾‘çš„æ‹†ç¦»<br>  æ­¤é¡¹ä¸»è¦ä¸»è¦æ˜¯ä¸ºäº†å®ç°äº®ç‚¹<ul><li>åœ¨æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯ç”¨ç›¸åŒè¯­è¨€å¼€å‘çš„æƒ…å†µä¸‹æä¾›é€»è¾‘çš„å¤ç”¨</li><li>ä¸ºé€»è¾‘éƒ¨åˆ†çš„å•å…ƒæµ‹è¯•æä¾›å¯èƒ½æ€§</li></ul></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> æ¸¸æˆ </tag>
            
            <tag> æ¡†æ¶ </tag>
            
            <tag> Lua </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git note</title>
      <link href="/2017/02/05/git-note/"/>
      <url>/2017/02/05/git-note/</url>
      
        <content type="html"><![CDATA[<h1 id="é€šç”¨"><a href="#é€šç”¨" class="headerlink" title="é€šç”¨"></a>é€šç”¨</h1><h2 id="ä½¿ç”¨gitä½œä¸ºsvnçš„ç‰ˆæœ¬ç®¡ç†å·¥å…·"><a href="#ä½¿ç”¨gitä½œä¸ºsvnçš„ç‰ˆæœ¬ç®¡ç†å·¥å…·" class="headerlink" title="ä½¿ç”¨gitä½œä¸ºsvnçš„ç‰ˆæœ¬ç®¡ç†å·¥å…·"></a>ä½¿ç”¨gitä½œä¸ºsvnçš„ç‰ˆæœ¬ç®¡ç†å·¥å…·</h2><h3 id="ä»svnåœ°å€è·å–cloneä»“åº“"><a href="#ä»svnåœ°å€è·å–cloneä»“åº“" class="headerlink" title="ä»svnåœ°å€è·å–cloneä»“åº“"></a>ä»svnåœ°å€è·å–cloneä»“åº“</h3><p>ä½¿ç”¨ git clone [svnä»“åº“åœ°å€]<br>ps:å¦‚æœä¸éœ€è¦æŠŠsvnæ‰€æœ‰æ–‡ä»¶ä¿®æ”¹è®°å½•downä¸‹æ¥å¯ä»¥æ·»åŠ -r HEAD å‚æ•°å†æœ€åé¢ï¼Œè¿™æ ·å¯ä»¥åªcloneä¸‹æ¥æœ€æ–°çš„æ–‡ä»¶</p><h3 id="è·å–æ›´æ–°"><a href="#è·å–æ›´æ–°" class="headerlink" title="è·å–æ›´æ–°"></a>è·å–æ›´æ–°</h3><p>ä½¿ç”¨ git svn fetch</p><h3 id="åˆå¹¶è¿œç¨‹åˆ†æ”¯ä»£ç åˆ°æœ¬åœ°åˆ†æ"><a href="#åˆå¹¶è¿œç¨‹åˆ†æ”¯ä»£ç åˆ°æœ¬åœ°åˆ†æ" class="headerlink" title="åˆå¹¶è¿œç¨‹åˆ†æ”¯ä»£ç åˆ°æœ¬åœ°åˆ†æ"></a>åˆå¹¶è¿œç¨‹åˆ†æ”¯ä»£ç åˆ°æœ¬åœ°åˆ†æ</h3><p>ä½¿ç”¨ git svn rebase<br>ps: å…¶å®å½“ä½¿ç”¨è¿™ä¸ªå‘½ä»¤çš„æ—¶å€™gitä¼šè‡ªåŠ¨ä»svnå–ä¸‹å½“å‰æœ€æ–°ä»£ç å¹¶åˆå¹¶åˆ°å½“å‰æœ¬åœ°åˆ†æ”¯ï¼Œæ‰€ä»¥æ— ç‰¹æ®Šæƒ…å†µä½¿ç”¨æ­¤å‘½ä»¤å³å¯</p><h3 id="æäº¤ä»£ç åˆ°svn"><a href="#æäº¤ä»£ç åˆ°svn" class="headerlink" title="æäº¤ä»£ç åˆ°svn"></a>æäº¤ä»£ç åˆ°svn</h3><p>ä½¿ç”¨git svn dcommit<br>æ­¤å‘½ä»¤ä¼šå°†æœ¬åœ°æ‰€æœ‰æäº¤ä¸€ä¸€æäº¤åˆ°svnä»“åº“ï¼Œæ‰€ä»¥æäº¤å‰æœ€å¥½å…ˆæ•´ç†ä¸‹æœ¬åœ°æäº¤</p><a id="more"></a><h1 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h1><h2 id="åˆ‡æ¢svnåœ°å€"><a href="#åˆ‡æ¢svnåœ°å€" class="headerlink" title="åˆ‡æ¢svnåœ°å€"></a>åˆ‡æ¢svnåœ°å€</h2><p><a href="http://bit.ly/2jTvjw3" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a></p><ul><li>Edit the svn-remote url URL in .git/config to point to the new domain name</li><li>Run git svn fetch - This needs to fetch at least one new revision from svn!</li><li>Change svn-remote url back to the original url</li><li>Run git svn rebase -l to do a local rebase (with the changes that came in with the last fetch operation)</li><li>Change svn-remote url back to the new url</li><li>Run git svn rebase should now work again!</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> ç‰ˆæœ¬ç®¡ç† </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title></title>
      <link href="/404.html"/>
      <url>/404.html</url>
      
        <content type="html"><![CDATA[<!DOCTYPE HTML><html><head>  <meta http-equiv="content-type" content="text/html;charset=utf-8;"/>  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />  <meta name="robots" content="all" />  <meta name="robots" content="index,follow"/>  <link rel="stylesheet" type="text/css" href="https://qzone.qq.com/gy/404/style/404style.css"></head><body>  <script type="text/plain" src="http://www.qq.com/404/search_children.js"          charset="utf-8" homePageUrl="/"          homePageName="å›åˆ°æˆ‘çš„ä¸»é¡µ">  </script>  <script src="https://qzone.qq.com/gy/404/data.js" charset="utf-8"></script>  <script src="https://qzone.qq.com/gy/404/page.js" charset="utf-8"></script></body></html>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>æ ‡ç­¾</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>about</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
